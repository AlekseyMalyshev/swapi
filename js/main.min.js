!function(t){function e(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){var r=angular.module("app",["ui.router"]);r.controller("residentCtrl",["$scope","$stateParams","starWars",function(t,e,r){t.back="page({num: "+r.getCurrPage()+"})",r.getResident(e.id,function(e,r){e?console.error(e.status):t.character=r})}]),r.controller("planetCtrl",["$scope","$stateParams","starWars",function(t,e,r){function a(){t.prev=function(){var t=1===r.getCurrPage()?r.getCurrPage():r.getCurrPage()-1;return"page({num: "+t+"})"},t.next=function(){var t=r.getPageCount()===r.getCurrPage()?r.getCurrPage():r.getCurrPage()+1;return"page({num: "+t+"})"};for(var e=[],a=1;a<=r.getPageCount();++a)e.push({state:"page({num: "+a+"})",num:a,"class":a===r.getCurrPage()?"active":""});t.pages=e}t.planets=[],t.pages=[],a();var n=Number(e.num?e.num:1);r.getPlanets(n,function(e,r){e?console.error(e.status):(t.planets=r,a())})}]),r.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/planets"),t.state("home",{url:""}).state("planets",{url:"/planets",templateUrl:"partials/planets.html",controller:"planetCtrl"}).state("page",{url:"/page/:num",templateUrl:"partials/planets.html",controller:"planetCtrl"}).state("resident",{url:"/resident/:id",templateUrl:"partials/resident.html",controller:"residentCtrl"})}]),r.service("starWars",["$http",function(t){this.pages=[],this.pageCount=0,this.residents={},this.currPage=1,this.getPageCount=function(){return this.pageCount},this.getCurrPage=function(){return this.currPage},this.getPlanets=function(e,r){this.currPage=e,this.pages[e]?r(null,this.pages[e]):(self=this,t.get("http://swapi.co/api/planets/?page="+e+"&format=json").then(function(t){self.pages[e]=t.data.results.map(function(t){return t.residents=t.residents.map(function(t){var t={url:t};return t.id=t.url.match(/\d+/)[0],self.residents[t.id]=t,t}),t}),self.pageCount=Math.ceil(t.data.count/10),r(null,self.pages[e])},function(t){r(t)}))},this.getResident=function(e,r){var a=this.residents[e];a.character?r(null,a.character):t.get("http://swapi.co/api/people/"+e+"/?format=json").then(function(t){a.character=t.data,r(null,a.character)},function(t){r(t)})}}])}]);